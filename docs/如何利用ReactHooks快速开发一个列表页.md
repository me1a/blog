---
author: meihuan
date: 2019-12-31
---

# 如何在十分钟内快速开发一个列表页

## 前言

列表页主要功能是数据展示，搜索，排序。通常，无论什么后台应用系统，几乎都会有列表页， 而且都不只一个。对于开发人员而言，功能一致的页面，每个页面上都要写同样的功能，比如，onSearch， reset， pageChange，onChange等等，是非常枯燥的事情。如何简化这些重复性的工作，如何能在十分钟开发完这种列表页，是本文主要的目的。

## 选择方向

对于这种简化工作，有一部分通过封装组件的方式。在业务页面传递特定的参数, 比如通过下面的配置，就会渲染出两个输入框和一个下拉框：


``` js
    const filterFields = [
      [
        'permName',
        ['Input', { label: '权限名称', placeholder: '请输入' }],
      ],
      [
        'permCode',
        ['Input', { label: '权限标识码', placeholder: '请输入' }],
      ],d
      [
        'permType',
        [
          'Select',
          { label: '类型', style: { width: '100%' }, placeholder: '请选择' },
          {
            list: [...type]
          }
        ]
      ]
    ];
```

实际上，这种解决方案本人认为简化程度还不是很高。在这个封装的组件内必须要考虑到多种因素，搜索组件不只局限于已知的组件（输入框，下拉框，日期选择等等），搜索的功能也不仅仅是onChange，可能还要做搜索条件联动等。 这种情况下，组件内做的兼容就多了起来，组件会变得非常臃肿。

我希望，界面是界面，逻辑是逻辑。界面的逻辑在界面处理。而不是组件包含了所有情况，如果没有，就在组件里面一个个加。

## 需求

通常，一个列表页包含以下功能：
- [x] 搜索（条件不同进行搜索， 相同无动作）
- [x] 重置（同上）
- [x] 刷新（条件相同也搜索）
- [x] 添加改变自动请求， 不加任何多余代码
- [x] 改变非页数条件，页数归一
- [x] 将搜索条件关联到url的query
- [x] url的只显示与初始状态不一样的query
- [x] 通过刷新， 或者返回上一页时，保持上一次的搜索